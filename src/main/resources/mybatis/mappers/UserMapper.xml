<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="UserMapper">
  	
  	<sql id="usermap_cols">
  		 u.user_seq
  		,u.user_name
  		,u.user_email
  		,vendor
  		,created_at
  		,user_role
  	</sql>
  	<resultMap type="User" id="usermap">
  		<id column="user_seq" property="seq"/>
  		<result column="user_name" property="name"/>
  		<result column="user_email" property="email"/>
  		<result column="vendor" property="vendor"/>
  		<result column="created_at" property="creationTime"/>
  		<result column="user_role" property="role"/>
  	</resultMap>
  	<select id="findBy" parameterType="map" resultMap="usermap">
  		SELECT
	  		<include refid="usermap_cols" />
	  	FROM dt_users u
	  	WHERE ${colname} = #{value}
  	</select>
  	
  	<insert id="insertUser"
  		parameterType="User"
  		useGeneratedKeys="true"
  		keyProperty="seq" keyColumn="user_seq">
	  	INSERT INTO dt_users(
	  		user_name, user_email, user_pass, vendor, created_at, user_role 
	  	) VALUES (
	  		#{name}, #{email}, #{pass}, #{vendor}, #{creationTime}, #{role}
	  	)  
  	</insert>
  </mapper>